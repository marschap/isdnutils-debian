<HTML>
<HEAD>
<TITLE>V B O X: Installation</TITLE>
</HEAD>
<BODY>
<A HREF="vbox-2.html">Zurück</A>
<A HREF="vbox-4.html">Weiter</A>
<A HREF="vbox.html#toc3">Inhaltsverzeichnis</A>
<HR>
<H2><A NAME="id-install"></A> <A NAME="s3">3. Installation</A></H2>


<P>F&uuml;r die Installation werden folgende Dinge ben&ouml;tigt:</P>
<P>
<UL>
<LI>GCC in der Version 2.7.0 oder h&ouml;her,</LI>
<LI>Linux Kernel in der Version 2.0 oder h&ouml;her,</LI>
<LI>NCurses in der Version 1.9.9e oder h&ouml;her.</LI>
</UL>
</P>
<P>Zudem sollte <EM>isdn4linux</EM> bereits funktionsf&auml;hig mit Audiosupport
installiert sein.</P>
<P>F&uuml;r das Abspielen der aufgenommenen Nachrichten in den Formaten
<CODE>ADPCM-2</CODE>, <CODE>ADPCM-3</CODE> und <CODE>ADPCM-4</CODE> werden zus&auml;tzlich
die <B>pvftools</B> aus dem Paket <EM>mgetty</EM> (Version 0.99 vom 18.
April 1996) ben&ouml;tigt.</P>
<P>F&uuml;r die Formate <CODE>ALAW</CODE> und <CODE>ULAW</CODE> liegen Programme zum
Abspielen nach <CODE>/dev/audio</CODE> bei.</P>
<P>Vor der Installation sollten folgende Dateien an das eigene System angepasst
werden:</P>
<P>
<UL>
<LI>`<CODE>Makefile</CODE>' (siehe Kapitel 
<A HREF="#id-install-makefile">Einstellungen in `Makefile'</A>)</LI>
<LI>`<CODE>src/settings.h</CODE>' (siehe Kapitel 
<A HREF="#id-install-settings">Einstellungen in `src/settings.h'</A>)</LI>
</UL>
</P>
<P>Zum erzeugen aller Programme von <EM>vbox</EM> tippen Sie</P>
<P><CODE>$ make vbox</CODE></P>
<P>Die Programme befinden sich danach - sofern sie fehlerfrei erzeugt wurden -
im Unterverzeichnis <CODE>bin</CODE> des Quelltextverzeichnisses. Mit</P>
<P><CODE>$ make install</CODE></P>
<P>werden diese in die im `<CODE>Makefile</CODE>' (siehe Kapitel 
<A HREF="#id-install-makefile">Einstellungen in `Makefile'</A>) angegebenen
Verzeichnisse kopiert.</P>
<P><B>Bemerkung:</B> Vergessen Sie nicht, da&szlig; ebenfalls im
`<CODE>Makefile</CODE>' (siehe Kapitel 
<A HREF="#id-install-makefile">Einstellungen in `Makefile'</A>) angegebene Spoolverzeichnis per Hand
oder mit</P>
<P><CODE>$ make install-dir</CODE></P>
<P>zu erzeugen. Die Unterverzeichnisse</P>
<P>
<UL>
<LI>&lt;Benutzername&gt;</LI>
<LI>&lt;Benutzername&gt;/incoming</LI>
<LI>&lt;Benutzername&gt;/messages</LI>
</UL>
</P>
<P>werden von <EM>vboxgetty</EM> zur Laufzeit automatisch erzeugt, falls sie
noch nicht existieren.</P>
<P><B>Bemerkung:</B> Die Standardansagen werden <B>nicht</B> automatisch
erzeugt, sondern m&uuml;ssen f&uuml;r jede Person selbst in das entsprechende
Unterverzeichnis kopiert werden.</P>


<H2><A NAME="id-install-makefile"></A> <A NAME="ss3.1">3.1 Einstellungen in `Makefile'</A></H2>


<P>Folgende Einstellungen sind im `<CODE>Makefile</CODE>' m&ouml;glich:</P>
<P>
<DL>

<DT><B>SPOOLDIR</B><DD>
<P>Verzeichnis, in dem die Daten f&uuml;r <EM>vbox</EM> abgelegt werden sollen.
F&uuml;r jeden Benutzer, f&uuml;r den ein <EM>vboxgetty</EM> l&auml;uft, wird dort ein
eigenes Verzeichnis angelegt.</P>
<P><B>Beispiel:</B> <CODE>/var/spool/vbox</CODE></P>

<DT><B>INSTALLSBINDIR</B><DD>
<P>Verzeichnis, in das die Programme installiert werden, die nur vom Benutzer
<CODE>root</CODE> gestartet werden sollten.</P>
<P><B>Beispiel:</B> <CODE>/usr/local/sbin</CODE></P>

<DT><B>INSTALLBINDIR</B><DD>
<P>Verzeichnis, in das alle Programme installiert werden, die von normalen
Benutzern aufgerufen werden d&uuml;rfen.</P>
<P><B>Beispiel:</B> <CODE>/usr/local/bin</CODE></P>

<DT><B>INSTALLXSBINDIR</B><DD>
<P>Verzeichnis, in das alle Programme installiert werden, die unter X11 laufen
und nur vom Benutzer <CODE>root</CODE> gestartet werden sollten.</P>
<P><B>Beispiel:</B> <CODE>/usr/X11/bin</CODE></P>

<DT><B>INSTALLXBINDIR</B><DD>
<P>Verzeichnis, in das alle Programme installiert werden, die unter X11 laufen
und von normalen Benutzern aufgerufen werden d&uuml;rfen.</P>
<P><B>Beispiel:</B> <CODE>/usr/X11/bin</CODE></P>

<DT><B>INSTALLSBIN</B><DD>
<P>Kommando, mit dem alle Programme installiert werden, die nur vom Benutzer
<CODE>root</CODE> gestartet werden sollten.</P>
<P><B>Beispiel:</B> <CODE>install -s -o root -g root -m 750</CODE></P>

<DT><B>INSTALLBIN</B><DD>
<P>Kommando, mit dem alle Programme installiert werden, die von normalen
Benutzern gestartet werden k&ouml;nnen.</P>
<P><B>Beispiel:</B> <CODE>install -s -o root -g bin -m 755</CODE></P>

<DT><B>CC</B><DD>
<P>Der Kompiler, der zum &Uuml;bersetzen der Quelltexte verwendet werden soll.</P>
<P><B>Beispiel:</B> <CODE>gcc</CODE></P>

<DT><B>CCFLAGS</B><DD>
<P>Flag's, die dem Kompiler &uuml;bergeben werden sollen.</P>
<P><B>Beispiel:</B> <CODE>-i486 -O2 -Wall</CODE></P>

</DL>
</P>



<H2><A NAME="id-install-settings"></A> <A NAME="ss3.2">3.2 Einstellungen in `src/settings.h'</A></H2>


<P>Folgende Einstellungen sind in `<CODE>src/settings.h</CODE>' m&ouml;glich (alle
vorgegebenen Einstellungen <B>m&uuml;ssen</B> angegeben werden):</P>
<P>
<DL>

<DT><B>LOGFILE</B><DD>
<P>Name der Logdatei in die <EM>vbox</EM> seine Meldungen schreibt. Der
Platzhalter `<CODE>%s</CODE>' wird durch den Namen des jeweiligen tty-Devices
ersetzt.</P>
<P><B>Beispiel:</B> <CODE>"/var/log/vbox.%s"</CODE></P>

<DT><B>LOCKFILE</B><DD>
<P>Name der Datei mit der <EM>vbox</EM> die einzelnen Devices lockt. Der
Platzhalter `<CODE>%s</CODE>' wird durch den Namen des jeweiligen tty-Devices
ersetzt.</P>
<P><B>Beispiel:</B> <CODE>"/var/lock/LCK..%s"</CODE></P>

<DT><B>PIDFILE</B><DD>
<P>Name der Datei in der <EM>vbox</EM> seine Proze&szlig;-ID vermerkt. Der
Platzhalter `<CODE>%s</CODE>' wird durch den Namen des jeweiligen tty-Devices
ersetzt.</P>
<P><B>Beispiel:</B> <CODE>"/var/run/vbox-pid.%s"</CODE></P>

<DT><B>VBOXRC</B><DD>
<P>Name der Konfigurationsdatei, die sich im Homeverzeichnis des jeweiligen
Benutzers befinden kann.</P>
<P><B>Beispiel:</B> <CODE>".vboxrc"</CODE></P>

<DT><B>MODEM_RING_TIMEOUT</B><DD>
<P>Anzahl der Sekunden, in denen versucht wird, einen <CODE>RING</CODE> vom
Modem einzulesen, nachdem ein eingehender Anruf erkannt wurde.</P>
<P><B>Beispiel:</B> <CODE>5</CODE></P>

<DT><B>MODEM_COMMAND_TIMEOUT</B><DD>
<P>Anzahl der Sekunden, in denen versucht wird, da&szlig; Ergebnis eines
AT-Kommandos einzulesen.</P>
<P><B>Beispiel:</B> <CODE>2</CODE></P>

<DT><B>MODEM_ECHOCMD_TIMEOUT</B><DD>
<P>Anzahl der Sekunden, in denen versucht wird, da&szlig; Echo eines AT-Kommandos
einzulesen.</P>
<P><B>Beispiel:</B> <CODE>2</CODE></P>

<DT><B>MODEM_WAIT_TIMEOUT</B><DD>
<P>Anzahl der Sekunden, nach deren Ablauf ein Kommando an das Modem geschickt
wird, um festzustellen, ob es noch reagiert. Der Wert 0 schaltet diese
&Uuml;berpr&uuml;fung aus.</P>
<P><B>Beispiel:</B> <CODE>1800</CODE></P>

<DT><B>DEFAULT_RINGS</B><DD>
<P>Anzahl der <CODE>RING</CODE>'s, bevor <EM>vbox</EM> den Anruf entgegennimmt.
Bei mir pers&ouml;nlich (<CODE>Europa 10</CODE>) werden 5 <CODE>RING</CODE>'s
gemeldet, bevor das Telefon einmal klingelt.</P>
<P><B>Beispiel:</B> <CODE>20</CODE></P>

<DT><B>DEFAULT_RECORD_TIME</B><DD>
<P>Voreingestellte maximale Zeit in Sekunden, die ein entgegengenommener
Anruf aufgezeichnet wird.</P>
<P><B>Beispiel:</B> <CODE>60</CODE></P>

<DT><B>VOICE_COMPRESSION_MODE</B><DD>
<P>Kompressionsmodus beim Aufzeichnen von Audiodaten. Folgende Modi sind
m&ouml;glich:</P>
<P>
<UL>
<LI><CODE>2</CODE> f&uuml;r <CODE>ADPCM-2</CODE></LI>
<LI><CODE>3</CODE> f&uuml;r <CODE>ADPCM-3</CODE></LI>
<LI><CODE>4</CODE> f&uuml;r <CODE>ADPCM-4</CODE></LI>
<LI><CODE>5</CODE> f&uuml;r <CODE>ALAW</CODE></LI>
<LI><CODE>6</CODE> f&uuml;r <CODE>ULAW</CODE>
</LI>
</UL>
</P>
<P><B>Beispiel:</B> <CODE>4</CODE></P>

<DT><B>NEED_FREE_DISK_SPACE</B><DD>
<P>Anzahl der Byte's, die auf der Partition des Spoolverzeichnisses noch
frei sein m&uuml;ssen, damit ein Anruf entgegengenommen wird.</P>
<P><B>Bemerkung:</B> Wird in dieser Version noch nicht unterst&uuml;tzt.</P>

<DT><B>VBOXPLAYCMD</B><DD>
<P>Kommando zum Abspielen einer Nachricht in <EM>vbox</EM>. Dem Kommando
werden folgende Argumente &uuml;bergeben:</P>
<P>
<OL>
<LI>Dateiname der ausgew&auml;hlten Nachricht</LI>
<LI>Eingestellte Lautst&auml;rke
</LI>
</OL>
</P>
<P><B>Beispiel:</B> <CODE>"/usr/local/bin/vboxplay"</CODE></P>
<P>Im Verzeichnis `<CODE>samples</CODE>' befindet sich das Beispielskript
`<CODE>vboxplay</CODE>', das die <EM>pvftools</EM> und den <EM>Network Audio
Server</EM> zum Spielen der Nachrichten benutzt.</P>

</DL>
</P>



<HR>
<A HREF="vbox-2.html">Zurück</A>
<A HREF="vbox-4.html">Weiter</A>
<A HREF="vbox.html#toc3">Inhaltsverzeichnis</A>
</BODY>
</HTML>
