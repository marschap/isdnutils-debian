<!doctype linuxdoc system>

<article>

<title>V B O X
<author>Michael `Ghandi' Herold &lt;<tt>michael@abadonna.franken.de</tt>&gt;
<date>Version 1.0 (16. Juni 1996)
<abstract>
Diese Dokumentation beschreibt die Installation und Konfiguration von
<em>vbox</em>, einem Anrufbeantworter für <em>isdn4linux</em>.
</abstract>

<!-- *********************************************************************
     **									**
     **	            I N H A L T S V E R Z E I C H N I S			**
     **									**
     ********************************************************************* -->

<toc>
<p>

<sect>Copyright<label id="id-copyright">
<p>

<!-- *********************************************************************
     **									**
     **	                       C O P Y R I G H T			**
     **									**
     ********************************************************************* -->

Copyright &copy; 1996 bei Michael Herold (<tt>michael@abadonna.franken.de</tt>)

Das Paket <em>vbox</em> ist freie Software und kann unter den Bedingungen
der <em>GNU General Public License</em> veröffentlicht oder verändert
werden.

Die Dokumentation sowie alle Programme von <em>vbox</em> wurden mit großer
Sorgfalt erstellt. Dennoch sind Fehler nicht ganz auszuschließen. Aus diesem
Grund sind die in der vorliegenden Dokumentation enthaltenen Angaben mit
keiner Verpflichtung oder Garantie irgendeiner Art verbunden. Sowohl Michael
Herold als auch die in Kapitel <ref id="id-danksagungen"
name="Danksagungen"> genannten Personen übernehmen keine Verantwortung oder
sonstige Haftung für Schäden, die auf irgendeine Art aus der Benutzung der
Dokumentation oder den darin beschriebenen Programmen entstehen oder
entstanden sind.

<!-- *********************************************************************
     **									**
     **	                        V O R W O R T				**
     **									**
     ********************************************************************* -->

<sect>Vorwort<label id="id-vorwort">
<p>

<!-- *********************************************************************
     ** VORWORT: Was ist vbox?						**
     ********************************************************************* -->

<sect1>Was ist vbox?<label id="id-vorwort-wasistvbox">
<p>

<em>vbox</em> ist ein Paket mit Programmen zum Betrieb eines
Anrufbeantworters unter Linux. Es wird das Paket <em>isdn4linux</em> von
Fritz Elfert (entweder im Kernel oder als Modul) mit <tt>AUDIO SUPPORT</tt>
benötigt (enthalten ab Kernel pre2.0.4).

<em>vboxgetty</em> basiert auf <em>mgetty-0.99</em> (<em>vgetty</em>) vom
18. April 1996. Die mit <em>vboxgetty</em> aufgezeichneten Sprachdateien
können mit den dort enthaltenen <em>pvftools</em> abgespielt oder
konvertiert werden (für die Formate <tt>ULAW</tt> und <tt>ALAW</tt> liegen
Programme zum Abspielen nach `<tt>/dev/audio</tt>' bei). Die
<em>pfvtools</em> sind <bf>nicht</bf> im Paket von <em>vbox</em> enthalten.

<em>vboxgetty</em> wurde speziell für <em>isdn4linux</em> geschrieben und
ist nicht für normale Modems geeignet. Es können mit <em>vboxgetty</em>
keine Fax- oder Datenanrufe erkannt oder entgegengenommen werden. Wer so
etwas benötigt, dem kann ich nur <em>mgetty</em>, bzw. <em>vgetty</em>
empfehlen.

<!-- *********************************************************************
     ** VORWORT: Anregungen und Fehlermeldungen				**
     ********************************************************************* -->

<sect1>Anregungen und Fehlermeldungen<label id="id-vorwort-report">
<p>

Wer neue Ideen oder Anregungen hat, oder einen Fehler in einem der Programme
von <em>vbox</em> gefunden hat, kann diese an folgende Adresse schicken:

<tt>
michael@abadonna.franken.de
</tt>

Bei einer Mitteilung über einen Fehler bitte <bf>immer</bf> eine möglichst
genaue Beschreibung (am besten reproduzierbar) <bf>und</bf> den
entsprechenden Auszug aus den Logdateien beifügen.

<!-- *********************************************************************
     **									**
     **                   I N S T A L L A T I O N			**
     **									**
     ********************************************************************* -->

<sect>Installation<label id="id-install">
<p>

Für die Installation werden folgende Dinge benötigt:

<itemize>
<item>GCC in der Version 2.7.0 oder höher,
<item>Linux Kernel in der Version 2.0 oder höher,
<item>NCurses in der Version 1.9.9e oder höher.
</itemize>

Zudem sollte <em>isdn4linux</em> bereits funktionsfähig mit Audiosupport
installiert sein.

Für das Abspielen der aufgenommenen Nachrichten in den Formaten
<tt>ADPCM-2</tt>, <tt>ADPCM-3</tt> und <tt>ADPCM-4</tt> werden zusätzlich
die <bf>pvftools</bf> aus dem Paket <em>mgetty</em> (Version 0.99 vom 18.
April 1996) benötigt.

Für die Formate <tt>ALAW</tt> und <tt>ULAW</tt> liegen Programme zum
Abspielen nach <tt>/dev/audio</tt> bei.

Vor der Installation sollten folgende Dateien an das eigene System angepasst
werden:

<itemize>
<item>`<tt>Makefile</tt>' (siehe Kapitel <ref id="id-install-makefile" name="Einstellungen in `Makefile'">)
<item>`<tt>src/settings.h</tt>' (siehe Kapitel <ref id="id-install-settings" name="Einstellungen in `src/settings.h'">)
</itemize>

Zum erzeugen aller Programme von <em>vbox</em> tippen Sie

<tt>
&dollar; make vbox
</tt>

Die Programme befinden sich danach - sofern sie fehlerfrei erzeugt wurden -
im Unterverzeichnis <tt>bin</tt> des Quelltextverzeichnisses. Mit

<tt>
&dollar; make install
</tt>

werden diese in die im `<tt>Makefile</tt>' (siehe Kapitel <ref
id="id-install-makefile" name="Einstellungen in `Makefile'">) angegebenen
Verzeichnisse kopiert.

<bf>Bemerkung:</bf> Vergessen Sie nicht, daß ebenfalls im
`<tt>Makefile</tt>' (siehe Kapitel <ref id="id-install-makefile"
name="Einstellungen in `Makefile'">) angegebene Spoolverzeichnis per Hand
oder mit

<tt>
&dollar; make install-dir
</tt>

zu erzeugen. Die Unterverzeichnisse

<itemize>
<item>&lt;Benutzername&gt;
<item>&lt;Benutzername&gt;/incoming
<item>&lt;Benutzername&gt;/messages
</itemize>

werden von <em>vboxgetty</em> zur Laufzeit automatisch erzeugt, falls sie
noch nicht existieren.

<bf>Bemerkung:</bf> Die Standardansagen werden <bf>nicht</bf> automatisch
erzeugt, sondern müssen für jede Person selbst in das entsprechende
Unterverzeichnis kopiert werden.

<!-- *********************************************************************
     ** INSTALLATION: Makefile						**
     ********************************************************************* -->

<sect1>Einstellungen in `Makefile'<label id="id-install-makefile">
<p>

Folgende Einstellungen sind im `<tt>Makefile</tt>' möglich:

<descrip>

<tag/SPOOLDIR/
<p>

   Verzeichnis, in dem die Daten für <em>vbox</em> abgelegt werden sollen.
   Für jeden Benutzer, für den ein <em>vboxgetty</em> läuft, wird dort ein
   eigenes Verzeichnis angelegt.

   <bf>Beispiel:</bf> <tt>/var/spool/vbox</tt>

<tag/INSTALLSBINDIR/
<p>

   Verzeichnis, in das die Programme installiert werden, die nur vom Benutzer
   <tt>root</tt> gestartet werden sollten.

   <bf>Beispiel:</bf> <tt>/usr/local/sbin</tt>

<tag/INSTALLBINDIR/
<p>

   Verzeichnis, in das alle Programme installiert werden, die von normalen
   Benutzern aufgerufen werden dürfen.

   <bf>Beispiel:</bf> <tt>/usr/local/bin</tt>

<tag/INSTALLXSBINDIR/
<p>

   Verzeichnis, in das alle Programme installiert werden, die unter X11 laufen
   und nur vom Benutzer <tt>root</tt> gestartet werden sollten.

   <bf>Beispiel:</bf> <tt>/usr/X11/bin</tt>

<tag/INSTALLXBINDIR/
<p>

   Verzeichnis, in das alle Programme installiert werden, die unter X11 laufen
   und von normalen Benutzern aufgerufen werden dürfen.

   <bf>Beispiel:</bf> <tt>/usr/X11/bin</tt>

<tag/INSTALLSBIN/
<p>

   Kommando, mit dem alle Programme installiert werden, die nur vom Benutzer
   <tt>root</tt> gestartet werden sollten.

   <bf>Beispiel:</bf> <tt>install -s -o root -g root -m 750</tt>

<tag/INSTALLBIN/
<p>

   Kommando, mit dem alle Programme installiert werden, die von normalen
   Benutzern gestartet werden können.

   <bf>Beispiel:</bf> <tt>install -s -o root -g bin -m 755</tt>

<tag/CC/
<p>

   Der Kompiler, der zum Übersetzen der Quelltexte verwendet werden soll.

   <bf>Beispiel:</bf> <tt>gcc</tt>

<tag/CCFLAGS/
<p>

   Flag's, die dem Kompiler übergeben werden sollen.

   <bf>Beispiel:</bf> <tt>-i486 -O2 -Wall</tt>

</descrip>

<!-- *********************************************************************
     ** INSTALLATION: src/settings.h					**
     ********************************************************************* -->

<sect1>Einstellungen in `src/settings.h'<label id="id-install-settings">
<p>

Folgende Einstellungen sind in `<tt>src/settings.h</tt>' möglich (alle
vorgegebenen Einstellungen <bf>müssen</bf> angegeben werden):

<descrip>

<tag/LOGFILE/
<p>

   Name der Logdatei in die <em>vbox</em> seine Meldungen schreibt. Der
   Platzhalter `<tt>%s</tt>' wird durch den Namen des jeweiligen tty-Devices
   ersetzt.

   <bf>Beispiel:</bf> <tt>"/var/log/vbox.%s"</tt>

<tag/LOCKFILE/
<p>

   Name der Datei mit der <em>vbox</em> die einzelnen Devices lockt. Der
   Platzhalter `<tt>%s</tt>' wird durch den Namen des jeweiligen tty-Devices
   ersetzt.

   <bf>Beispiel:</bf> <tt>"/var/lock/LCK..%s"</tt>

<tag/PIDFILE/
<p>

   Name der Datei in der <em>vbox</em> seine Prozeß-ID vermerkt. Der
   Platzhalter `<tt>%s</tt>' wird durch den Namen des jeweiligen tty-Devices
   ersetzt.

   <bf>Beispiel:</bf> <tt>"/var/run/vbox-pid.%s"</tt>

<tag/VBOXRC/
<p>

   Name der Konfigurationsdatei, die sich im Homeverzeichnis des jeweiligen
   Benutzers befinden kann.

   <bf>Beispiel:</bf> <tt>".vboxrc"</tt>

<tag/MODEM_RING_TIMEOUT/
<p>

   Anzahl der Sekunden, in denen versucht wird, einen <tt>RING</tt> vom
   Modem einzulesen, nachdem ein eingehender Anruf erkannt wurde.

   <bf>Beispiel:</bf> <tt>5</tt>

<tag/MODEM_COMMAND_TIMEOUT/
<p>

   Anzahl der Sekunden, in denen versucht wird, daß Ergebnis eines
   AT-Kommandos einzulesen.

   <bf>Beispiel:</bf> <tt>2</tt>

<tag/MODEM_ECHOCMD_TIMEOUT/
<p>

   Anzahl der Sekunden, in denen versucht wird, daß Echo eines AT-Kommandos
   einzulesen.

   <bf>Beispiel:</bf> <tt>2</tt>

<tag/MODEM_WAIT_TIMEOUT/
<p>

   Anzahl der Sekunden, nach deren Ablauf ein Kommando an das Modem geschickt
   wird, um festzustellen, ob es noch reagiert. Der Wert 0 schaltet diese
   Überprüfung aus.

   <bf>Beispiel:</bf> <tt>1800</tt>

<tag/DEFAULT_RINGS/
<p>

   Anzahl der <tt>RING</tt>'s, bevor <em>vbox</em> den Anruf entgegennimmt.
   Bei mir persönlich (<tt>Europa 10</tt>) werden 5 <tt>RING</tt>'s
   gemeldet, bevor das Telefon einmal klingelt.

   <bf>Beispiel:</bf> <tt>20</tt>

<tag/DEFAULT_RECORD_TIME/
<p>

   Voreingestellte maximale Zeit in Sekunden, die ein entgegengenommener
   Anruf aufgezeichnet wird.

   <bf>Beispiel:</bf> <tt>60</tt>

<tag/VOICE_COMPRESSION_MODE/
<p>

   Kompressionsmodus beim Aufzeichnen von Audiodaten. Folgende Modi sind
   möglich:

   <itemize>

   <item><tt>2</tt> für <tt>ADPCM-2</tt>
   <item><tt>3</tt> für <tt>ADPCM-3</tt>
   <item><tt>4</tt> für <tt>ADPCM-4</tt>
   <item><tt>5</tt> für <tt>ALAW</tt>
   <item><tt>6</tt> für <tt>ULAW</tt>

   </itemize>

   <bf>Beispiel:</bf> <tt>4</tt>

<tag/NEED_FREE_DISK_SPACE/
<p>

   Anzahl der Byte's, die auf der Partition des Spoolverzeichnisses noch
   frei sein müssen, damit ein Anruf entgegengenommen wird.

   <bf>Bemerkung:</bf> Wird in dieser Version noch nicht unterstützt.

<tag/VBOXPLAYCMD/
<p>

   Kommando zum Abspielen einer Nachricht in <em>vbox</em>. Dem Kommando
   werden folgende Argumente übergeben:

   <enum>

   <item>Dateiname der ausgewählten Nachricht
   <item>Eingestellte Lautstärke

   </enum>

   <bf>Beispiel:</bf> <tt>"/usr/local/bin/vboxplay"</tt>
 
   Im Verzeichnis `<tt>samples</tt>' befindet sich das Beispielskript
   `<tt>vboxplay</tt>', das die <em>pvftools</em> und den <em>Network Audio
   Server</em> zum Spielen der Nachrichten benutzt.

</descrip>

<!-- *********************************************************************
     **									**
     **                        P R O G R A M M E			**
     **									**
     ********************************************************************* -->

<sect>Programme<label id="id-programme">
<p>

<!-- *********************************************************************
     ** PROGRAMME: vboxgetty						**
     ********************************************************************* -->

<sect1>vboxgetty<label id="id-vboxgetty">
<p>

<em>vboxgetty</em> ist das eigentliche Hauptprogramm, welches die Anrufe
entgegennimmt, Ansagetexte abspielt und die Nachrichten der Anrufer
aufzeichnet.

Beim Start von <em>vboxgetty</em> können dem Programm folgende Argumente
übergeben werden:

<descrip>

<tag/<tt>-s GESCHWINDIGKEIT</tt>/
<p>

   Die Geschwindigkeit, mit der <em>vboxgetty</em> das Modem ansprechen
   soll. Die Voreinstellung von <tt>38400</tt> sollte in den meisten Fällen
   ausreichend sein und ist auch für <tt>ADPCM-4</tt> geeignet.

   <bf>Beispiel:</bf> <tt>vboxgetty -s 38400</tt>

<tag/<tt>-d DEVICE</tt>/
<p>

   Name des Devices, das als Modem benutzt werden soll. Das Device braucht
   vorher nicht mit <em>setserial</em> eingestellt zu werden.

   <bf>Beispiel:</bf> <tt>vboxgetty -d /dev/ttyI5</tt>

<tag/<tt>-u BENUTZERNAME</tt>/
<p>

   <em>vboxgetty</em> <bf>muß</bf> beim Start der Name eines Benutzers
   angegeben werden, für den die Nachrichten aufgezeichnet werden sollen.

   Der angegebene Benutzer muß in der `<tt>/etc/passwd</tt>' eingetragen
   sein und auf dem System existieren.

   <bf>Beispiel:</bf> <tt>vboxgetty -u michael</tt>

<tag/<tt>-i MODEM-INIT-KOMMANDO</tt>/
<p>

   Kommando zum Initialisieren des Modems. Hier sollte unter anderem die
   Telefonnummer angegeben werden, auf die <em>vboxgetty</em> - also der
   Anrufbeantworter - reagieren soll.

   Benutzer, die den <em>iprofd</em> von <em>isdn4linux</em> benutzen,
   sollten hier mindestens <bf>immer</bf> die Telefonnummer angeben, auf die
   reagiert werden soll.

   <bf>Beispiel:</bf> <tt>vboxgetty -i "ATZ&amp;E7850413"</tt>

</descrip>

Ein normaler Aufruf von <em>vboxgetty</em> sollte in etwa so aussehen:

<tt>
&dollar; vboxgetty -d /dev/ttyI6 -i "ATZ&amp;E7850413" -u michael
</tt>

Für den in diesem Beispiel angegebenen Benutzer `michael' werden im
Spoolverzeichnis folgende Verzeichnisse angelegt, falls diese noch nicht
existieren:

<itemize>
<item><tt>michael</tt>
<item><tt>michael/incoming</tt>
<item><tt>michael/messages</tt>
</itemize>

Im <tt>Incoming</tt>-Verzeichnis werden alle Nachrichten abgelegt, die bei
einem Anruf aufgezeichnet werden. Die Dateinamen dieser Nachrichten haben
folgendes Format:

<tt>
&lt;Jahr&gt;&lt;Monat&gt;&lt;Tag&gt;&lt;Stunde&gt;&lt;Minute&gt;&lt;Sekunde&gt;-&lt;CallerID&gt;
</tt>

Wenn die Rufnummer eines Anrufers (sprich die CallerID) nicht ermittelt
werden konnte (z.B. weil der Anrufer keinen ISDN-Anschluß besitzt), wird für
das Feld <tt>&lt;CallerID&gt;</tt> der Wert <tt>0</tt> eingesetzt.

<bf>Beispiel eines <tt>Incoming</tt>-Verzeichnisses:</bf>

<verb>
-rw-------   1 michael  users       24592 Jun 10 11:02 960610110220-9317850413
-rw-------   1 michael  users      131292 Jun 10 11:14 960610111408-9317850413
-rw-------   1 michael  users       28104 Jun 10 11:16 960610111612-0
</verb>

Wenn <em>vboxgetty</em> eine Nachricht aufzeichnet, wird diese nur mit den
Zugriffsrechten `<tt>--w-------</tt>' geöffnet. Sobald die Nachricht zu Ende
aufgenommen wurde, werden die Zugriffsrechte zu `<tt>-rw-------</tt>'
geändert.

Programme, welche dem Benutzer eine Liste der eingegangenen Nachrichten
anzeigen, sollten nur solche Dateien aufnehmen, bei denen das <tt>r</tt>-Bit
(Lesbar) gesetzt ist, um sicher zu sein, daß die Nachricht zu Ende
aufgezeichnet wurde (siehe Kapitel <ref id="id-vbox" name="vbox">).

Im <tt>Messages</tt>-Verzeichnis müssen sich alle Ansagetexte befinden, die
von <em>vboxgetty</em> gespielt werden sollen. Es existieren folgende
voreingestellte Namen:

<descrip>

<tag/<tt>standard.msg</tt>/
<p>

   Wird als normaler Ansagetext gespielt. Dieser kann in der Datei
   `<tt>.vboxrc</tt>' (siehe Kapitel <ref id="id-vboxrc" name="vboxrc">) für
   jeden Anrufer individuell eingestellt werden.

<tag/<tt>beep.msg</tt>/
<p>

   Wird nach dem Ansagetext kurz vor der Aufnahme gespielt und sollt den
   Anrufer darauf aufmerksam machen, daß er jetzt seine Nachricht
   aufsprechen kann.

<tag/<tt>timeout.msg</tt>/
<p>

   Wird gespielt, wenn die maximale Aufzeichnungszeit abgelaufen ist. Hier
   könnte z.B. der Text "<tt>Vielen Dank für Ihren Anruf</tt>" gesprochen
   werden.

<tag/<tt>panic.msg</tt>/
<p>

   Wird gespielt, wenn die Nachricht des Anrufers nicht aufgezeichnet werden
   konnte. Hier könnte z.B. der Text "<tt>Ihr Anruf konnte leider nicht
   aufgezeichnet werden. Bitte versuchen Sie es zu einem späteren Zeitpunk
   noch einmal</tt>" gesprochen werden.

</descrip>

Einige Beispielansagen befinden sich im Verzeichnis
`<tt>samples/messages</tt>'.

<bf>Bemerkung:</bf> <em>vboxgetty</em> sollte am besten aus der
`<tt>/etc/inittab</tt>', aus `<tt>/etc/rc.d/rc.local</tt>' oder vom Benutzer
<tt>root</tt> gestartet werden. Wenn <em>vboxgetty</em> von einem anderen
Benutzer gestartet werden soll, ist eine Anpassung der Zugriffsrechte für
einige Dateien nötig (z.B. die Devices oder die Logdateien).


<!-- *********************************************************************
     ** PROGRAMME: vbox							**
     ********************************************************************* -->

<sect1>vbox<label id="id-vbox">
<p>

<em>vbox</em> ist eine auf <em>ncurses</em> basierende Benutzeroberfläche
zum Ansehen und Abspielen der aufgezeichneten Nachrichten.

Beim Programmstart können folgende Argumente angegeben werden:

<descrip>

<tag/<tt>-d DEVICE</tt>/
<p>

   Name des Devices für die Bildschirm Ein- und Ausgabe. Fehlt diese Angabe,
   wird `<tt>/dev/tty</tt>' (aktueller Bildschirm) benutzt.

   <bf>Beispiel:</bf> <tt>vbox -d /dev/tty12</tt>

<tag/<tt>-u BENUTZERNAME</tt>/
<p>

   Name des Benutzers, dessen Nachrichten eingesehen werden sollen. Diese
   Option kann nur benutzt werden, wenn <em>vbox</em> vom Benutzer
   <tt>root</tt> gestartet wird. <em>vbox</em> läuft dann im sogenannten
   `viewmode', in dem alle Funktionen gesperrt sind und nur die Liste der
   aufgezeichneten Nachrichten angezeigt wird.

   Sofort nach dem Start setzt <em>vbox</em> die Rechte auf den angegebenen
   Benutzer zurück.

   <bf>Beispiel:</bf> <tt>vbox -u michael</tt>

<tag/<tt>-r SEKUNDEN</tt>/
<p>

   Diese Option ist eigentlich nur im Zusammenhang mit `-u' sinnvoll und
   gibt an, nach wievielen Sekunden die Nachrichtenliste neu eingelesen
   werden soll.

   <bf>Beispiel:</bf> <tt>vbox -r 60</tt>

</descrip>

Beim booten des Rechners könnte <em>vbox</em> z.B. wie folgt aufgerufen
werden:

<tt>
&dollar; vbox -d /dev/tty12 -u michael -r 60 &amp;
</tt>

In diesem Beispiel würde <em>vbox</em> alle Nachrichten des Benutzers
`michael' auf `<tt>/dev/tty12</tt>' (Konsole 12) anzeigen und alle 60
Sekunden prüfen, ob sich die Liste geändert hat.

Wenn <em>vbox</em> von einem normalen Benutzer (also nicht von
<tt>root</tt>) aufgerufen und nicht in den `viewmode' geschaltet wurde,
stehen folgende Funktionen zur Verfügung:

<itemize>

<item><tt>[CURSOR HOCH]</tt> und <tt>[CURSOR RUNTER]</tt>
<p>

   Bewegt den Markierbalken in der Liste hoch oder runter. Alle Funktionen
   beziehen sich immer auf den gerade angewählten Eintrag.

<item>`<tt>P</tt>', `<tt>p</tt>' oder <tt>[RETURN]</tt>
<p>

   Spielt den aktuellen Eintrag mit dem in `<tt>src/settings.h</tt>' (siehe
   Kapitel <ref id="id-install-settings" name="Einstellungen in
   `src/settings.h'">) unter <tt>VBOXPLAYCMD</tt> eingestellten Programm.

   Dem Programm wird beim Aufruf als erstes Argument der Name der Datei und
   als zweites Argument die eingestellte Lautstärke übergeben.

<item>`<tt>R</tt>' oder `<tt>r</tt>'
<p>

   Liest die Liste der Nachrichten neu ein. Diese wird auf dem Bildschirm nur
   dann neu dargestellt, wenn Änderungen gefunden werden konnten.

<item>`<tt>N</tt>' oder `<tt>n</tt>'
<p>

   Markiert einen Eintrag als neu oder als gelesen.

<item>`<tt>D</tt>' oder `<tt>d</tt>'
<p>

   Markiert einen Eintrag als gelöscht oder hebt diese Markierung auf.

<item>`<tt>+</tt>' oder `<tt>-</tt>'
<p>

   Setzt die Lautstärke hoch oder runter.

<item>`<tt>Q</tt>' oder `<tt>q</tt>'
<p>

   Beendet das Programm. Wenn Einträge als gelöscht markiert wurden, erscheint
   zusätzlich eine Sicherheitsabfrage, ob diese auch auf dem Datenträger
   gelöscht werden sollen.

<item>`<tt>O</tt>'
<p>

   Schaltet die Annahme von Anrufen ein oder aus. Dazu wird im
   Homeverzeichnis des Benutzers eine Datei mit dem Namen
   `<tt>.vboxstop</tt>' erzeugt oder gelöscht. Existiert diese Datei, nimmt
   <em>vboxgetty</em> keine Anrufe mehr entgegen.

   Die Datei kann auch von Hand angelegt oder gelöscht werden.

</itemize>

<em>vbox</em> nimmt nur Nachrichten in die Liste auf, die ein gesetztes
<tt>r</tt>-Bit (Lesbar) haben. Gelesene Nachrichten werden mit dem
<tt>x</tt>-Bit (Ausführbar) versehen.

<!-- *********************************************************************
     ** PROGRAMME: rmdcutheader						**
     ********************************************************************* -->

<sect1>rmdcutheader<label id="id-rmdcutheader">
<p>

Das Programm <em>rmdcutheader</em> entfernt den <tt>RAW MODEM DATA
HEADER</tt> einer Voicedatei.

Der Aufruf ist denkbar einfach:

<tt>
&dollar; rmdcutheader &lt;DATEI_MIT_HEADER &gt;DATEI_OHNE_HEADER
</tt>

Um zum Beispiel Nachrichten, die im Format <tt>ULAW</tt> aufgezeichnet
wurden, nach `<tt>/dev/audio</tt>' zu spielen, kann man wie folgt vorgehen:

<tt>
&dollar; rmdcutheader &lt;VOICEMESSAGE &gt;/dev/audio
</tt>

<!-- *********************************************************************
     ** PROGRAMME: rmdcatheader						**
     ********************************************************************* -->

<sect1>rmdcatheader<label id="id-rmdcatheader">
<p>

Mit <em>rmdcatheader</em> kann ein <tt>RAW MODEM DATA HEADER</tt> für die
Formate <tt>ADPCM-2</tt>, <tt>ADPCM-3</tt>, <tt>ADPCM-4</tt>, <tt>ALAW</tt>
oder <tt>ULAW</tt> erzeugt werden.

Folgende Argumente können übergeben werden:

<descrip>

<tag/<tt>-2, --adpcm2</tt>/
<p>
   Erzeugt einen <tt>RAW MODEM DATA HEADER</tt> mit der Kompression
   <tt>ADPCM-2</tt>.

<tag/<tt>-3, --adpcm3</tt>/
<p>
   Erzeugt einen <tt>RAW MODEM DATA HEADER</tt> mit der Kompression
   <tt>ADPCM-3</tt>.

<tag/<tt>-4, --adpcm4</tt>/
<p>
   Erzeugt einen <tt>RAW MODEM DATA HEADER</tt> mit der Kompression
   <tt>ADPCM-4</tt>.

<tag/<tt>-u, --ulaw</tt>/
<p>
   Erzeugt einen <tt>RAW MODEM DATA HEADER</tt> mit der Kompression
   <tt>ULAW</tt>.

<tag/<tt>-a, --alaw</tt>/
<p>
   Erzeugt einen <tt>RAW MODEM DATA HEADER</tt> mit der Kompression
   <tt>ALAW</tt>.

</descrip>

<bf>Bemerkung:</bf> Alle Header haben als Modemtyp `<tt>ZyXEL 1496</tt>'
eingetragen.

<!-- *********************************************************************
     **									**
     **	                  K O N F I G U R A T I O N			**
     **									**
     ********************************************************************* -->

<sect>Konfiguration<label id="id-konfiguration">
<p>

<!-- *********************************************************************
     ** KONFIGURATION: vboxrc						**
     ********************************************************************* -->

<sect1>vboxrc<label id="id-vboxrc">
<p>

Jeder Benutzer kann sich in seinem Homeverzeichnis eine Datei mit dem Namen
`<tt>.vboxrc</tt>' anlegen, in der einige Einstellungen für <em>vbox</em> und
<em>vboxgetty</em> gemacht werden können.

Die Datei ist in verschiedene Sektionen unterteilt. Jede Sektion beginnt mit
einem `<tt>[</tt>', enthält einen Sektionsnamen und endet mit einem
`<tt>]</tt>'.

Die Groß- und Kleinschreibung zwischen den Sektionskennungen `<tt>[</tt>'
und `<tt>]</tt>' wird ignoriert. Leere Zeichen und solche die mit einem
`<tt>#</tt>' beginnen werden überlesen. Kommentare am Ende einer Zeile
(beginnen mit `<tt>#</tt>') werden entfernt.

Folgende Sektionen existieren:

<descrip>

<tag/<tt>[CALLERID]</tt>/
<p>

   <bf>Format:</bf> <tt>CALLERID-PATTERN ALIAS</tt>

   Hier können sogenannte `Aliase' für <tt>CALLERID</tt>'s angegeben werden.
   Die <tt>CALLERID</tt> wird bei ISDN-Geräten - sofern nicht abgeschaltet -
   mit übermittelt und dient zum Idendifizieren des Anrufers.

   <descrip>

   <tag/<tt>CALLERID-PATTERN</tt>/
   <p>

      <tt>CALLERID</tt> für die ein Alias definiert werden soll (ohne
      führende Nullen). Es können hier die üblichen UN*X-Pattern angegeben
      werden. In der <tt>CALLERID</tt> dürfen keine Leerzeichen enthalten
      sein.

   <tag/<tt>ALIAS</tt>/
   <p>

      Name, der dieser <tt>CALLERID</tt> zugeordnet werden soll. Der
      Aliasname darf Leerzeichen enthalten.

   </descrip>

   Als letzter Eintrag sollte <bf>immer</bf> `<tt>* *** Unknown ***</tt>'
   angegeben werden (siehe Beispiel). Dieses Pattern gilt für alle Anrufe,
   bei denen keine <tt>CALLERID</tt> übermittelt oder in der Liste gefunden
   wurde.

   <bf>Beispiel:</bf>

   <verb>
   [CALLERID]

   913469992[6-8]          Bernd Braun
   91437850413             Michael Herold
   *                       *** Unknown ***
   </verb>

   Die <bf>erste</bf> Übereinstimmung einer <tt>CALLERID</tt> mit einem der
   Pattern wird benutzt.

<tag/<tt>[DEBUG]</tt>/
<p>

   <bf>Format:</bf> <tt>FLAG + FLAG + FLAG ...</tt>

   In dieser Sektion können Flag's angegeben werden, die bestimmen, welche
   Informationen in die Logdatei von <em>vboxgetty</em> aufgenommen werden
   sollen.

   Folgende Flag's können angegeben werden:

   <itemize>

   <item><tt>FATAL</tt>
   <p>
      Fatale Fehler

   <item><tt>ERRORS</tt>
   <p>
      Normal Fehler

   <item><tt>WARNINGS</tt>
   <p>
      Warnungen

   <item><tt>INFOS</tt>
   <p>
      Informationen

   <item><tt>DEBUG</tt>
   <p>
      Informationen zum Debuggen

   <item><tt>JUNK</tt>
   <p>
      Erweiterte Informationen zum Debuggen

   </itemize>

   <bf>Beispiel:</bf> <tt>FATAL + ERRORS + WARNINGS + INFOS</tt>

<tag/<tt>[RINGS]</tt>/
<p>

   <bf>Format:</bf> <tt>ZEIT RINGS</tt>

   Hier kann angegeben werden, zu welcher Zeit nach wievielen <tt>RING</tt>'s
   ein eingehender Anruf entgegengenommen werden soll.

   <descrip>

   <tag/<tt>ZEIT</tt>/
   <p>

      Eine oder mehrere Zeitzonen; Die Zeitangaben können durch Kommata
      voneinander getrennt werden. Bei einer Zeitzone von
      `<tt>STARTZEIT</tt>-<tt>ENDZEIT</tt>' ist die letzte Zahl inklusiv
      (z.B. <tt>18-22</tt> heißt von 18 bis einschließlich 22 Uhr).

   <tag/<tt>RINGS</tt>/
   <p>

      Anzahl der <tt>RING</tt>'s bis ein Anruf entgegengenommen wird. Eine
      Anzahl von 0 <tt>RING</tt>'s heißt, daß der Anruf nicht
      entgegengenommen werden soll.

   </descrip>

   <bf>Beispiel:</bf>

   <verb>
      0-8     5 
      *       30
   </verb>

   Im oben angegebenen Beispiel würde <em>vboxgetty</em> von 0 bis 8 Uhr nach
   5 <tt>RING</tt>'s und zu allen anderen Zeiten nach 30 <tt>RING</tt>'s den
   Anruf entgegennehmen.

   Die <bf>erste</bf> Übereinstimming der aktuellen Zeit mit einer
   Zeitangabe wird benutzt.

   <bf>Achtung!</bf>

   Beim einem Fehler (z.B. einer Falschen Zeitangabe) wird immer 0
   <tt>RING</tt>'s angenommen. Achten Sie also bitte auf die Ausgabe in der
   Logdatei um solche Situationen auszuschließen!

<tag/<tt>Alias Sektionen</tt>/
<p>

   <bf>Format:</bf> <tt>ZEIT ANSAGETEXT AUFNAHMEZEIT</tt>

   Mit <tt>ALIAS SEKTIONEN</tt> können für Aliase, die in der Sektion
   <tt>[CALLERID]</tt> definiert wurden, eigene Einstellungen gemacht
   werden.

   <descrip>

   <tag/<tt>ZEIT</tt>/
   <p>

      Eine oder mehrere Zeitzonen; Die Zeitangaben können durch Kommata
      voneinander getrennt werden. Bei einer Zeitzone von
      `<tt>STARTZEIT</tt>-<tt>ENDZEIT</tt>' ist die letzte Zahl inklusiv
      (z.B. <tt>18-22</tt> heißt von 18 bis einschließlich 22 Uhr).

   <tag/<tt>ANSAGETEXT</tt>/
   <p>

      Ansagetext der gespielt werden soll. Der Ansagetext wird aus dem
      <tt>Message</tt>-Verzeichnis des Benutzers geladen, für den
      <em>vboxgetty</em> Nachrichten aufzeichnen soll.

   <tag/<tt>AUFNAHMEZEIT</tt>/
   <p>

      Maximale Aufzeichnungszeit in Sekunden. Eine Aufzeichnungszeit von 0
      Sekunden unterdrückt die Aufzeichnung.

   </descrip>

   Wenn für eine <tt>CALLERID</tt> keine <tt>ALIAS SEKTION</tt> gefunden
   wurde, wird immer die Datei `<tt>standard.msg</tt>' als Ansagetext
   gespielt und 60 Sekunden lang aufgezeichnet.

   <bf>Beispiel:</bf>

   Haben Sie Beispielsweise in der Sektion <tt>[CALLERID]</tt> eine Alias
   `Peter Muster' mit der <tt>CALLERID</tt> 931271111 definiert, können Sie
   sich für diesen eine <tt>ALIAS SEKTION</tt> erstellen:

   <verb>
   [Peter Muster]

   0-7,8                   standard.msg            30
   *                       standard.msg            60
   </verb>

   Jedesmal wenn bei einem Anruf die <tt>CALLERID</tt> 931271111 erkannt
   wird, werden die Einstellungen der <tt>ALIAS SEKTION</tt> für den Alias
   der <tt>CALLERID</tt> (also in diesem Beispiel `Peter Muster') benutzt.

   <bf>Bemerkung:</bf> Legen Sie sich eine <tt>ALIAS SEKTION</tt> `<tt>[***
   Unknown ***]</tt>' an, die benutzt wird, wenn keine <tt>CALLERID</tt>
   ermittelt werden konnte.

</descrip>

<!-- *********************************************************************
     **									**
     **                     D A N K S A G U N G E N			**
     **									**
     ********************************************************************* -->

<sect>Danksagungen<label id="id-danksagungen">
<p>

Bedanken möchte ich mich bei:

<itemize>

<item><bf>Fritz Elfert</bf> (<tt>fritz@wuemaus.franken.de</tt>)
<p>

   Für <em>isdn4linux</em>, sein Hilfe bei einigen Problemen und den
   schnellen Einbau der DTMF-Erkennung.

<item><bf>Nicole Sauvage</bf> (<tt>nicole@abadonna.franken.de</tt>)
<p>

   Für die englische Übersetzung dieser Dokumentation.

</itemize>

Und natürlich bei alle anderen, die mich mit zahlreichen neuen Ideen und
Anregungen versorgt haben.

</article>
